{% extends 'base.html' %}
{% load static %}
{% block title %}Welcome — Stationery POS{% endblock %}

{% block content %}

<style>
  /* Page-specific polish (keeps your global theme intact) */
  .landing-hero{
    background: linear-gradient(135deg, var(--brand-2), var(--brand-1));
    color:#fff; border-radius: 1rem; position: relative; overflow: hidden;
  }
  .landing-hero .blob{
    position:absolute; border-radius:50%; filter: blur(48px); opacity:.25;
  }
  .blob.bl1{ width:360px; height:360px; background:#ffffff; top:-80px; left:-80px; }
  .blob.bl2{ width:300px; height:300px; background:#8ea0ff; bottom:-100px; right:-60px; opacity:.18; }
  .feature-chip{
    display:inline-flex; align-items:center; gap:.5rem;
    background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2);
    color:#fff; padding:.45rem .7rem; border-radius: .75rem; margin:.25rem .35rem .35rem 0;
  }
  .brand-logo{ max-width: 220px; height:auto; z-index: 1;}
  .login-card{ border:1px solid var(--card-border); border-radius:1rem; }
  .login-card .input-group-text{ background:#f8f9fc; }
  .trusted-note{ color: rgba(255,255,255,.85); }
</style>

<div class="landing-hero p-4 p-lg-5 mb-4">
  <span class="blob bl1"></span>
  <span class="blob bl2"></span>

  <div class="row align-items-center g-4">
    <!-- Left: Brand + Value props -->
    <div class="col-12 col-lg-7">
      <div class="d-flex align-items-center gap-3 mb-3">
        <img class="brand-logo" src="{% static 'brand/nuvana-light.png' %}?v=2" alt="Nuvana Solutions">
        <div class="d-none d-lg-block">
          <div class="h5 mb-0">Stationery POS</div>
        </div>
      </div>

      <h1 class="display-6 fw-semibold mb-2">Fast. Simple. Retail-ready.</h1>
      <p class="trusted-note mb-3">
        Barcode-first billing, product-level taxes, purchase & stock control, and PDF reports—beautifully packaged.
      </p>

      <div class="mb-2">
        <span class="feature-chip"><i class="bi bi-upc-scan"></i> Barcode POS</span>
        <span class="feature-chip"><i class="bi bi-receipt"></i> GST-friendly totals</span>
        <span class="feature-chip"><i class="bi bi-box-seam"></i> Inventory & reorder</span>
        <span class="feature-chip"><i class="bi bi-filetype-csv"></i> CSV import/export</span>
        <span class="feature-chip"><i class="bi bi-printer"></i> A4 barcode labels</span>
      </div>
    </div>

    <!-- Right: Login -->
    <div class="col-12 col-lg-5">
      {% if form.errors or form.non_field_errors %}
        <div class="alert alert-danger shadow-sm">
          <i class="bi bi-exclamation-octagon me-1"></i>
          Invalid username or password. Please try again.
        </div>
      {% endif %}

      <form method="post" class="card login-card shadow-sm">
        {% csrf_token %}
        {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}

        <div class="card-body p-4 p-lg-4">
          <div class="text-center mb-3">
            <div class="h4 fw-semibold mb-0">Sign in</div>
            <div class="text-muted">Welcome back</div>
          </div>

          <div class="mb-3">
            <label class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person"></i></span>
              <input type="text" name="username" class="form-control" required autocomplete="username"
                     value="{{ form.username.value|default:'' }}">
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label d-flex justify-content-between align-items-center">
              <span>Password</span>
              <a href="#" class="small text-muted disabled" tabindex="-1" aria-disabled="true" title="Password reset not configured">Forgot?</a>
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-lock"></i></span>
              <input type="password" name="password" class="form-control" required autocomplete="current-password" id="loginPassword">
              <button class="btn btn-outline-secondary" type="button" id="togglePW" aria-label="Show password">
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>

          <div class="d-grid">
            <button class="btn btn-primary btn-lg" type="submit">
              <i class="bi bi-box-arrow-in-right me-1"></i>Login
            </button>
          </div>

          <div class="text-center text-muted small mt-3">
            Having trouble? Contact your administrator.
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  // show/hide password
  (function(){
    const btn = document.getElementById('togglePW');
    const input = document.getElementById('loginPassword');
    if (btn && input) {
      btn.addEventListener('click', function(){
        const isPwd = input.getAttribute('type') === 'password';
        input.setAttribute('type', isPwd ? 'text' : 'password');
        const icon = btn.querySelector('i');
        if (icon) icon.className = isPwd ? 'bi bi-eye-slash' : 'bi bi-eye';
        btn.setAttribute('aria-label', isPwd ? 'Hide password' : 'Show password');
      });
    }
  })();
</script>
{% endblock %}
