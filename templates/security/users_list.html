{% extends 'base.html' %}
{% block title %}Users — Security{% endblock %}
{% block breadcrumb %}Security / Users{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="m-0">Users</h3>
  <a href="{% url 'security_user_new' %}" class="btn btn-primary"><i class="bi bi-person-plus me-1"></i>New User</a>
</div>

<form class="row g-2 mb-3">
  <div class="col-auto">
    <input type="text" class="form-control" name="q" value="{{ q }}" placeholder="Search username/email">
  </div>
  <div class="col-auto">
    <button class="btn btn-outline-secondary">Search</button>
  </div>
</form>

<div class="table-responsive">
<table class="table table-striped align-middle">
  <thead>
    <tr>
      <th>Username</th><th>Email</th><th>Status</th><th>Roles</th><th style="width:120px"></th>
    </tr>
  </thead>
  <tbody>
    {% for u in page.object_list %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.email }}</td>
      <td>
        {% if u.is_active %}<span class="badge bg-success">Active</span>{% else %}<span class="badge bg-secondary">Inactive</span>{% endif %}
        {% if u.is_staff %}<span class="badge bg-info text-dark">Staff</span>{% endif %}
        {% if u.is_superuser %}<span class="badge bg-danger">Superuser</span>{% endif %}
      </td>
      <td>
        {% for g in u.groups.all %}<span class="badge bg-light text-dark border">{{ g.name }}</span>{% empty %}<span class="text-muted">—</span>{% endfor %}
      </td>
      <td class="text-end">
        <a class="btn btn-sm btn-outline-primary" href="{% url 'security_user_edit' u.id %}">Edit</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center text-muted">No users</td></tr>
    {% endfor %}
  </tbody>
</table>
</div>

{% include "partials/pagination.html" with page=page %}
{% endblock %}
