{% extends 'base.html' %}
{% block content %}
<h3>Sales Report</h3>
<form class="row g-2 mb-3">
  <div class="col-auto"><input type="date" name="start" class="form-control" value="{{ start }}"></div>
  <div class="col-auto"><input type="date" name="end" class="form-control" value="{{ end }}"></div>
  <div class="col-auto"><button class="btn btn-outline-secondary">Filter</button></div>
  <div class="col-auto"><a class="btn btn-primary" href="?{% if start %}start={{ start }}&{% endif %}{% if end %}end={{ end }}&{% endif %}format=pdf">Download PDF</a></div>
</form>
<div class="text-end mb-2"><b>Total: â‚¹ {{ total }}</b></div>
<table class="table table-sm table-striped">
  <thead><tr><th>Date</th><th>Inv/CRN</th><th>Customer</th><th class="text-end">Subtotal</th><th class="text-end">Tax</th><th class="text-end">Total</th></tr></thead>
  <tbody>
    {% for s in sales %}
    <tr>
      <td>{{ s.date }}</td>
      <td>{% if s.is_return %}CRN{% else %}INV{% endif %}-{{ s.id }}</td>
      <td>{% if s.customer %}{{ s.customer.name }}{% endif %}</td>
      <td class="text-end">{{ s.subtotal }}</td>
      <td class="text-end">{{ s.tax }}</td>
      <td class="text-end">{{ s.total }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-muted text-center">No sales</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
